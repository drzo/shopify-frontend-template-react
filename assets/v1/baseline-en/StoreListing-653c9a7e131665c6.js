"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([["StoreListing"],{"./node_modules/@shopify/polaris/build/esnext/components/EmptySearchResult/EmptySearchResult.esnext":(e,t,n)=>{n.d(t,{K:()=>l});var s=n("./node_modules/react/index.js"),i="data:image/svg+xml,%3csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M41.87 24a17.87 17.87 0 11-35.74 0 17.87 17.87 0 0135.74 0zm-3.15 18.96a24 24 0 114.24-4.24L59.04 54.8a3 3 0 11-4.24 4.24L38.72 42.96z' fill='%238C9196'/%3e%3c/svg%3e",a=n("./node_modules/@shopify/polaris/build/esnext/utilities/i18n/hooks.esnext"),o=n("./node_modules/@shopify/polaris/build/esnext/components/LegacyStack/LegacyStack.esnext"),r=n("./node_modules/@shopify/polaris/build/esnext/components/Text/Text.esnext"),c=n("./node_modules/@shopify/polaris/build/esnext/components/Image/Image.esnext");function l({title:e,description:t,withIllustration:n}){const l=(0,a.Q)().translate("Polaris.EmptySearchResult.altText"),d=t?s.createElement("p",null,t):null,u=n?s.createElement(c.E,{alt:l,source:i,draggable:!1}):null;return s.createElement(o.D,{alignment:"center",vertical:!0},u,s.createElement(r.x,{variant:"headingLg",as:"p"},e),s.createElement(r.x,{color:"subdued",as:"span"},d))}},"./node_modules/@shopify/polaris/build/esnext/components/Pagination/Pagination.esnext":(e,t,n)=>{n.d(t,{t:()=>S});var s,i=n("./node_modules/@shopify/polaris-icons/dist/icons/ChevronLeftMinor.svg.mjs"),a=n("./node_modules/@shopify/polaris-icons/dist/icons/ChevronRightMinor.svg.mjs"),o=n("./node_modules/react/index.js");!function(e){e.Input="INPUT",e.Textarea="TEXTAREA",e.Select="SELECT",e.ContentEditable="contenteditable"}(s||(s={}));var r={Pagination:"Polaris-Pagination_1af4k"},c=n("./node_modules/@shopify/polaris/build/esnext/utilities/i18n/hooks.esnext"),l=n("./node_modules/@shopify/polaris/build/esnext/utilities/features/hooks.esnext"),d=n("./node_modules/@shopify/polaris/build/esnext/components/KeypressListener/KeypressListener.esnext"),u=n("./node_modules/@shopify/polaris/build/esnext/components/ButtonGroup/ButtonGroup.esnext"),p=n("./node_modules/@shopify/polaris/build/esnext/components/Tooltip/Tooltip.esnext"),h=n("./node_modules/@shopify/polaris/build/esnext/components/Box/Box.esnext"),m=n("./node_modules/@shopify/polaris/build/esnext/components/Button/Button.esnext"),g=n("./node_modules/@shopify/polaris/build/esnext/components/Text/Text.esnext");function S({hasNext:e,hasPrevious:t,nextURL:n,previousURL:s,onNext:S,onPrevious:y,nextTooltip:x,previousTooltip:C,nextKeys:_,previousKeys:j,accessibilityLabel:k,accessibilityLabels:L,label:N}){const A=(0,c.Q)(),{polarisSummerEditions2023:I}=(0,l.h)(),w=(0,o.createRef)(),P=k||A.translate("Polaris.Pagination.pagination"),z=(null==L?void 0:L.previous)||A.translate("Polaris.Pagination.previous"),U=(null==L?void 0:L.next)||A.translate("Polaris.Pagination.next"),E=o.createElement(m.z,{outline:!0,icon:i.S,accessibilityLabel:z,url:s,onClick:y,disabled:!t,id:"previousURL"}),T=C&&t?o.createElement(p.u,{activatorWrapper:"span",content:C},E):E,B=o.createElement(m.z,{outline:!0,icon:a.S,accessibilityLabel:U,url:n,onClick:S,disabled:!e,id:"nextURL"}),O=x&&e?o.createElement(p.u,{activatorWrapper:"span",content:x},B):B,D=y||b,F=j&&(s||y)&&t&&j.map((e=>o.createElement(d.n,{key:e,keyCode:e,handler:v(s?f("previousURL",w):D)}))),M=S||b,R=_&&(n||S)&&e&&_.map((e=>o.createElement(d.n,{key:e,keyCode:e,handler:v(n?f("nextURL",w):M)}))),q=e&&t?o.createElement("span",null,N):o.createElement(g.x,{color:"subdued",as:"span"},N),$=N?o.createElement(h.x,{padding:I?"3":void 0,paddingBlockStart:"0",paddingBlockEnd:"0"},o.createElement("div",{"aria-live":"polite"},q)):null;return o.createElement("nav",{"aria-label":P,ref:w,className:r.Pagination},F,R,o.createElement(u.h,{segmented:!N||I},T,$,O))}function f(e,t){return()=>{if(null==t.current)return;const n=t.current.querySelector(`#${e}`);n&&n.click()}}function v(e){return()=>{(function(){if(null==document||null==document.activeElement)return!1;const{tagName:e}=document.activeElement;return e===s.Input||e===s.Textarea||e===s.Select||document.activeElement.hasAttribute(s.ContentEditable)})()||e()}}function b(){}},"./app/foundation/App/components/StoreList/components/StoreListing/StoreListing.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Cn});const s={en:JSON.parse('{"Head":{"title":"Your stores - Shopify"}}')};var i=n("./node_modules/@shopify/react-html/build/esnext/hooks.esnext"),a=n("./node_modules/@shopify/react-i18n/build/esnext/hooks.esnext"),o=n("./packages/@shopify/react-redirect/Redirect.tsx"),r=n("./node_modules/@shopify/react-hooks/build/esnext/hooks/isomorphic-layout-effect.esnext"),c=n("./packages/@web-utilities/other/index.ts");function l(e){return!e.webUrl}function d(e,t){return e.find((e=>l(e)&&(0,c.rv)(e.id)===t))}var u=n("./node_modules/react/index.js"),p=n("./packages/@web-utilities/error/hooks.ts"),h=n("./app/foundation/App/components/StoreList/components/GlobalState/GlobalStateContext.ts");const m=()=>(0,u.useContext)(h.P.userInfo.Context),g=()=>(0,u.useContext)(h.P.destinationsFetchStatus.Context);var S=n("./node_modules/@shopify/monorail/lib/monorail.js"),f=n("./packages/@web-utilities/env/index.ts");let v=function(e){return e.CreateStoreClick="merchant_space_stores_web_create_store/2.1",e.CreateStoreConfirm="merchant_space_stores_web_create_store_confirm/2.1",e.CreateStoreError="merchant_space_stores_web_create_store_error/1.1",e.LinkClick="merchant_space_stores_web_click/2.1",e.PageView="merchant_space_stores_web_pageview/2.1",e.StoreClick="merchant_space_stores_web_click_store/5.0",e.StoresLoad="merchant_space_stores_web_storesload/1.0",e.TenEffInlineError="merchant_onboarding_signup_10_field_inline_error/2.0",e.TenEffEnterStorePressed="merchant_onboarding_signup_10_field_enter_store_pressed/4.0",e.TenEffEnterStoreError="merchant_onboarding_signup_10_field_enter_store_error/4.0",e.TenEffBackButtonPressed="merchant_onboarding_signup_10_field_back_button_pressed/2.0",e.QuestionnairePageView="merchant_onboarding_signup_commerce_background_pageview/3.3",e.QuestionnaireSingleAnswer="merchant_onboarding_commerce_questionnaire_single_answer/2.2",e.QuestionnaireNextPressed="merchant_onboarding_signup_commerce_background_next_pressed/3.1",e.QuestionnaireSkipPressed="merchant_onboarding_signup_commerce_background_skip_pressed/3.1",e.StoreStatusTabSelected="merchant_space_stores_web_tab_change/1.0",e.FilterValueChange="merchant_space_stores_web_filter_change/1.1",e.StoreListPaginationClick="merchant_space_stores_web_pagination_click/2.0",e}({});const b=f.yv?S.hl.createHttpProducer({production:!0}):S.hl.createLogProducer({debugMode:!0}),y={...{createStore(e){b.produce({schemaId:v.CreateStoreClick,payload:{...e?{identityUuid:e}:{}}})},createStoreConfirm(e,t){b.produce({schemaId:v.CreateStoreConfirm,payload:{...t?{identityUuid:t}:{},shopName:e}})},clickStore:(e,t,n,s,i)=>b.produce({schemaId:v.StoreClick,payload:{...i?{identityUuid:i}:{},...s,selectedShopId:e,selectedShopStatus:n,position:t}}),linkClick(e,t){b.produce({schemaId:v.LinkClick,payload:{...t?{identityUuid:t}:{},target:e}})},pageView(e,t){b.produce({schemaId:v.PageView,payload:{...t?{identityUuid:t}:{},referrer:e}})},storeStatusTabSelected(e,t,n){b.produce({schemaId:v.StoreStatusTabSelected,payload:{...n?{identityUuid:n}:{},...t,selectedTab:e}})},filterValueChange(e,t,n){b.produce({schemaId:v.FilterValueChange,payload:{...n?{identityUuid:n}:{},...t,filterValue:e}})},storeListPaginationClick(e,t,n,s,i){b.produce({schemaId:v.StoreListPaginationClick,payload:{...i?{identityUuid:i}:{},...s,currentPage:e,totalPageCount:t,actionType:n}})},storesLoad(e,t,n,s){b.produce({schemaId:v.StoresLoad,payload:{...s?{identityUuid:s}:{},requestCount:e,storesCount:t,completedSuccessfully:n}})}},...{tenEffInlineError({identityUuid:e,storeSignupUuid:t,invalidField:n,country:s}){b.produce({schemaId:v.TenEffInlineError,payload:{identityUuid:e,storeSignupUuid:t,invalidField:n,country:s}})},tenEffEnterStorePressed({identityUuid:e,storeSignupUuid:t,dataWasValid:n,country:s}){b.produce({schemaId:v.TenEffEnterStorePressed,payload:{identityUuid:e,storeSignupUuid:t,dataWasValid:n,country:s}})},tenEffEnterStoreError({identityUuid:e,storeSignupUuid:t,eventTrigger:n,invalidFields:s,country:i}){b.produce({schemaId:v.TenEffEnterStoreError,payload:{identityUuid:e,storeSignupUuid:t,eventTrigger:n,invalidFields:s,country:i}})},tenEffBackButtonPressed({identityUuid:e,storeSignupUuid:t}){b.produce({schemaId:v.TenEffBackButtonPressed,payload:{identityUuid:e,storeSignupUuid:t}})},questionnairePageView({identityUuid:e,storeSignupUuid:t}){b.produce({schemaId:v.QuestionnairePageView,payload:{identityUuid:e,storeSignupUuid:t}})},questionnaireSingleAnswer({storeSignupUuid:e,identityUuid:t,questionHandle:n,answers:s}){b.produce({schemaId:v.QuestionnaireSingleAnswer,payload:{storeSignupUuid:e,identityUuid:t,questionHandle:n,answers:s}})},questionnaireNextPressed({identityUuid:e,storeSignupUuid:t}){b.produce({schemaId:v.QuestionnaireNextPressed,payload:{identityUuid:e,storeSignupUuid:t}})},questionnaireSkipPressed({identityUuid:e,storeSignupUuid:t}){b.produce({schemaId:v.QuestionnaireSkipPressed,payload:{identityUuid:e,storeSignupUuid:t}})}}},x=()=>{const[e]=m();return{...y,clickStore:(t,n,s,i)=>y.clickStore(t,n,s,i,null==e?void 0:e.sub),createStore:()=>y.createStore(null==e?void 0:e.sub),createStoreConfirm:t=>y.createStoreConfirm(t,null==e?void 0:e.sub),linkClick:t=>y.linkClick(t,null==e?void 0:e.sub),pageView:t=>y.pageView(t,null==e?void 0:e.sub),storeStatusTabSelected:(t,n)=>y.storeStatusTabSelected(t,n,null==e?void 0:e.sub),filterValueChange:(t,n)=>y.filterValueChange(t,n,null==e?void 0:e.sub),storeListPaginationClick:(t,n,s,i)=>y.storeListPaginationClick(t,n,s,i,null==e?void 0:e.sub),storesLoad:({requestCount:t,storesCount:n,completedSuccessfully:s})=>y.storesLoad(t,n,s,null==e?void 0:e.sub)}};var C=n("./app/foundation/App/components/StoreList/components/types.ts"),_=n("./app/utilities/get-legacy-store-handle.ts");function j(e,t){let n=e.webUrl;const s=(0,_.C)(n);if(s){n=`/store/${s}${t?`?user=${t}`:""}`}return{...e,unifiedWebUrl:n}}var k=n("./app/foundation/App/components/StoreList/components/Destinations/DestinationsContext.ts");function L(){return(0,u.useContext)(k.v)}var N=n("./app/foundation/App/components/StoreList/components/UrlProvider/url.ts"),A=n("./node_modules/@shopify/network/build/esnext/network.esnext");const I="Failed to parse invalid JSON string";async function w(e){let t;try{t=await e.json()}catch(t){return function(e){return{status:e.status,error:I}}(e)}return function(e,t){return e.ok?function(e,t){return{status:e.status,data:t}}(e,t):function(e,t){return{status:e.status,error:t}}(e,t)}(e,t)}const P="Request Failed";async function z(e){const t=await e.text();return e.ok?function(e,t){return{status:e.status,data:t}}(e,t):function(e,t){return{status:e.status,error:t||P}}(e,t)}async function U(e){return function(e){const t=e.headers.get("content-type");return null!==t&&t.includes("application/json")}(e)?w(e):z(e)}class E{constructor(){this.defaultTimeout=6e4,this.headers=void 0,this.deserializer=U}get(e){return this.execute((t=>fetch(e,{...t,method:A.n$.Get,headers:this.getHeaders()})))}post(e,t){return this.execute((n=>fetch(e,{...n,method:A.n$.Post,headers:this.getHeaders(),body:JSON.stringify(t)})))}put(e,t){return this.execute((n=>fetch(e,{...n,method:A.n$.Put,headers:this.getHeaders(),body:JSON.stringify(t)})))}delete(e){return this.execute((t=>fetch(e,{...t,method:A.n$.Delete,headers:this.getHeaders()})))}getHeaders(){return this.headers}setHeaders(e){this.headers=e}setCustomDeserializer(e){this.deserializer=e}async execute(e){const{signal:t,clearTimer:n}=this.createAbortSignalWithTimeout();try{const n=await e({signal:t});return this.deserializer(n)}catch(e){return{error:e}}finally{n()}}createAbortSignalWithTimeout(){const e=new AbortController,t=setTimeout((()=>e.abort()),this.defaultTimeout);return{clearTimer:()=>clearTimeout(t),signal:e.signal}}}async function T(e){try{return async function(e){const{destinationsEndpoint:t}=new N.R,n=new E,s=await async function(){const{destinationsToken:e}=new N.R;return fetch(e()).then((e=>e.text()))}();n.setHeaders({"Content-Type":"application/json",Authorization:`Bearer ${s}`}),e.handleResponse&&n.setCustomDeserializer(e.handleResponse);return n.post(t,{query:e.graphqlQuery})}(e)}catch{return{error:"Could not fetch destinations from server"}}}function B(e){return{id:e.node.id,name:e.node.name,destinations:O(e.node.categories)}}function O(e){if(!Array.isArray(e))return[];try{return F(e.map((e=>e.destinations.edges))).map((e=>e.node)).filter(Boolean)}catch{return[]}}function D(e){const t=e.reduce(((e,{message:t,extensions:n,locations:s,path:i})=>e.concat(`\n        message: ${t}\n        locations: ${JSON.stringify(s)}\n        path: ${JSON.stringify(i)}\n        extensions: ${JSON.stringify(n)}\n        --------------------------------------------------\n      `)),"");return new Error(`[Destinations] An error occurred while proccessing the query ${t}`)}function F(e,t=[]){for(let n=0,s=e.length;n<s;n++){const s=e[n];Array.isArray(s)?F(s,t):t.push(s)}return t}function M({first:e,after:t}){return[...e?[`first: ${e}`]:[],...t?[`after: "${t}"`]:[]].join(", ")}const R=({organizations:e,organizationDestinations:t,orphanDestinations:n})=>`{\n  currentUserAccount {\n    ${0===e.first||0===t.first?"":((e={},t={})=>`organizations(${M(e)}) {\n  edges {\n    node {\n      id\n      name\n      categories(handles: STORES) {\n        destinations(${M(t)}) {\n          edges {\n            node {\n              ...destinationFields\n            }\n          }\n          pageInfo {\n            endCursor\n            hasNextPage\n          }\n        }\n      }\n    }\n  }\n  pageInfo {\n    endCursor\n    hasNextPage\n  }\n}`)(e,t)}\n    ${0===n.first?"":((e={})=>`orphanDestinations {\n  categories(handles: STORES) {\n    destinations(${M(e)}) {\n      edges {\n        node {\n          ...destinationFields\n        }\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n      }\n    }\n  }\n}`)(n)}\n  }\n}\nfragment destinationFields on Destination {\n  accountStatus\n  name\n  shortName\n  status\n  publicId\n  webUrl\n}\n`;function q({organizationDestinations:e,orphanDestinations:t,total:n}){return Math.floor((n-t)/e)}const $={organizationDestinations:13,orphanDestinations:360,total:4999};var V=function(e){return e.Phase1="phase_1",e.Phase2="phase_2",e.Done="done",e}(V||{});class Q{constructor(e,t){this.request=void 0,this.cursors=void 0,this.destinations=[],this.phase=void 0,this.limits=void 0,this.previousResponse=void 0,this.requestsCount=void 0,this.cursors={},this.limits=this.calculateLimits(null==t?void 0:t.limits),this.request=e,this.requestsCount=0,this.phase=V.Phase1}async collectAllDestinations(){for(;this.phase!==V.Done;)await this.nextRequest(),this.requestsCount++;return{...this.previousResponse,data:this.destinations}}getRequestCount(){return this.requestsCount}calculateLimits(e){const t={...$,...e||{}};return{...t,organizations:q(t)}}async makeRequest(e){return this.request({graphqlQuery:e,handleResponse:async e=>{var t;const n=await e.json();return n.errors?{error:D(n.errors),status:e.status}:{data:null===(t=n.data)||void 0===t?void 0:t.currentUserAccount,status:e.status}}})}normalizePhase2Response(e){return{organizations:{edges:Object.values(e).map((e=>({node:e}))),pageInfo:{hasNextPage:!1}}}}async nextRequest(){const e=this.getNextQuery(),{error:t,status:n,data:s}=await this.makeRequest(e);this.previousResponse={error:t,status:n};let i=s;var a,o,r,c;!t&&s&&(this.phase===V.Phase2&&(i=this.normalizePhase2Response(s)),this.updateCursors(i)),i&&this.mergeDestinations(null===(c=a=i)||"object"!=typeof c?[]:[...((null===(o=a.organizations)||void 0===o?void 0:o.edges)||[]).map(B),...O(null===(r=a.orphanDestinations)||void 0===r?void 0:r.categories)]),!t&&this.hasMorePages()?(this.optimizeLimits(),this.cursors.organizationDestinations&&1===Object.keys(this.cursors).length&&(this.phase=V.Phase2)):this.phase=V.Done}hasMorePages(){return 0!==Object.keys(this.cursors).length}maximizeOrphanDestinationLimits(){this.limits.orphanDestinations+=this.limits.organizations*this.limits.organizationDestinations,this.limits.organizations=0,this.limits.organizationDestinations=0}maximizeOrganizationLimits(){this.limits.organizations+=Math.floor(this.limits.orphanDestinations/this.limits.organizationDestinations),this.limits.orphanDestinations=0}maximizeOrganizationDestinationLimits(){this.limits.organizationDestinations=Math.floor(this.limits.total/this.cursors.organizationDestinations.length)}optimizeLimits(){!this.cursors.organizations&&this.cursors.orphanDestinations?this.maximizeOrphanDestinationLimits():!this.cursors.orphanDestinations&&this.cursors.organizations?this.maximizeOrganizationLimits():this.cursors.organizations||this.cursors.orphanDestinations||this.maximizeOrganizationDestinationLimits()}mergeDestinations(e){for(const t of e){if(l(t)){const e=this.destinations.find((e=>l(e)&&e.id===t.id));if(e&&l(e)){e.destinations=[...e.destinations,...t.destinations];continue}}this.destinations.push(t)}}updateOrganizationCursor(e){e.pageInfo.hasNextPage?this.cursors.organizations=e.pageInfo.endCursor:delete this.cursors.organizations}updateOrganizationDestinationsCursors(e){this.phase===V.Phase2&&delete this.cursors.organizationDestinations,e.edges.forEach((e=>{e.node.categories[0].destinations.pageInfo.hasNextPage&&(this.cursors.organizationDestinations||(this.cursors.organizationDestinations=[]),this.cursors.organizationDestinations.push({id:e.node.id,cursor:e.node.categories[0].destinations.pageInfo.endCursor}))}))}updateOrphanedDestinationsCursor(e){e.pageInfo.hasNextPage?this.cursors.orphanDestinations=e.pageInfo.endCursor:delete this.cursors.orphanDestinations}updateCursors(e){e.organizations&&(this.updateOrganizationCursor(e.organizations),this.updateOrganizationDestinationsCursors(e.organizations)),e.orphanDestinations&&this.updateOrphanedDestinationsCursor(e.orphanDestinations.categories[0].destinations)}getNextQuery(){return this.phase===V.Phase2?(e=this.cursors.organizationDestinations,t=this.limits.organizationDestinations,`{\n  currentUserAccount {\n    ${e.map((({id:e,cursor:n},s)=>`org${s}: organization(id: "${e}") {\n          id\n          categories(handles: STORES) {\n            destinations(${M({first:t,after:n})}) {\n              edges {\n                node {\n                  ...destinationFields\n                }\n              }\n              pageInfo {\n                endCursor\n                hasNextPage\n              }\n            }\n          }\n    }`)).join("")}\n  }\n}\nfragment destinationFields on Destination {\n  accountStatus\n  name\n  shortName\n  status\n  publicId\n  webUrl\n}\n`):R({organizations:{first:this.limits.organizations,after:this.cursors.organizations},organizationDestinations:{first:this.limits.organizationDestinations},orphanDestinations:{first:this.limits.orphanDestinations,after:this.cursors.orphanDestinations}});var e,t}}const W=[{id:"Z2lkOi8vb3JnYW5pemF0aW9uL09yZ2FuaXphdGlvbi8y",name:"Business 1",destinations:[{name:"Shop 1",shortName:"S1",webUrl:"https://shop1.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/1")},{name:"Shop 2",shortName:"S2",webUrl:"https://shop2.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/2")},{name:"Shop 3",shortName:"S3",webUrl:"https://shop3.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/3")},{name:"Shop 4",shortName:"S4",webUrl:"https://shop4.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/4")},{name:"Shop 5",shortName:"S5",webUrl:"https://shop5.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/5")},{name:"Shop 6",shortName:"S6",webUrl:"https://shop6.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/6")},{name:"Shop 7",shortName:"S7",webUrl:"https://shop7.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/7")},{name:"Shop 8",shortName:"S8",webUrl:"https://shop8.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/8")},{name:"Shop 9",shortName:"S9",webUrl:"https://shop9.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/9")},{name:"Shop 10",shortName:"S1",webUrl:"https://shop10.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/10")},{name:"Shop 11",shortName:"S1",webUrl:"https://shop11.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/11")},{name:"Shop 12",shortName:"S1",webUrl:"https://shop12.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/12")},{name:"Shop 13",shortName:"S1",webUrl:"https://shop13.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/13")},{name:"Shop 14",shortName:"S1",webUrl:"https://shop14.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/14")},{name:"Shop 15",shortName:"S1",webUrl:"https://shop15.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/15")},{name:"Shop 29",shortName:"S2",webUrl:"https://shop29.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/29")},{name:"Shop 30",shortName:"S3",webUrl:"https://shop30.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/30")},{name:"Shop 31",shortName:"S3",webUrl:"https://shop31.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/31")},{name:"Shop 32",shortName:"S3",webUrl:"https://shop32.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/32")},{name:"Shop 33",shortName:"S3",webUrl:"https://shop33.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/33")},{name:"Shop 34",shortName:"S3",webUrl:"https://shop34.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/34")}]},{id:"Z2lkOi8vb3JnYW5pemF0aW9uL09yZ2FuaXphdGlvbi81",name:"Organization 2",destinations:[{name:"Shop 22",shortName:"S2",webUrl:"https://shop22.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/22")},{name:"Shop 23",shortName:"S2",webUrl:"https://shop23.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/23")},{name:"Shop 24",shortName:"S2",webUrl:"https://shop24.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/24")},{name:"Shop 25",shortName:"S2",webUrl:"https://shop25.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/25")},{name:"Shop 26",shortName:"S2",webUrl:"https://shop26.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/26")},{name:"Shop 27",shortName:"S2",webUrl:"https://shop27.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/27")},{name:"Shop 28",shortName:"S2",webUrl:"https://shop28.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/28")}]},{name:"Boutique 16",shortName:"BT",webUrl:"https://shop16.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/16")},{name:"Boutique 17",shortName:"B1",webUrl:"https://shop17.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/17")},{name:"Boutique 18",shortName:"B1",webUrl:"https://shop18.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/18")},{name:"Shop 19",shortName:"S1",webUrl:"https://shop19.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/19")},{name:"Shop 20",shortName:"S2",webUrl:"https://shop20.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/20")},{name:"Shop 21",shortName:"S2",webUrl:"https://shop21.myshopify.io/admin",status:C.n3.Inactive,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/21")},{name:"Market 41",shortName:"M4",webUrl:"https://shop41.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/41")},{name:"Market 42",shortName:"M4",webUrl:"https://shop42.myshopify.io/admin",status:C.n3.Active,accountStatus:C.dp.Active,publicId:btoa("gid://organization/ShopifyShop/42")}];var H=n("./node_modules/process/browser.js");function J(){const[e]=(0,a.Q)(),t=(0,p.I)(),[n,s]=g(),[i,o]=L(),r=x();return(0,u.useEffect)((()=>{(async()=>{s(C.iF.Loading);try{var n;const t=await(async()=>{const e=new Q(T),t=await e.collectAllDestinations(),n=e.getRequestCount();var s;return n>1&&r.storesLoad({requestCount:n,storesCount:(null===(s=t.data)||void 0===s?void 0:s.length)||0,completedSuccessfully:!t.error}),t})();let{data:i}=t;const{error:a}=t;if(null!==(n=i)&&void 0!==n&&n.length||!a||!H.env.SPIN_DEVELOPMENT||(i=W),i){const t=(t=>[...t].sort(((t,n)=>t.name.trim().localeCompare(n.name.trim(),e.locale,{numeric:!0}))))(i),n=function(e){const t=new URLSearchParams(location.search).get("user");return e.map((e=>l(e)?{...e,destinations:e.destinations.map((e=>j(e,t)))}:j(e,t)))}(t);o(n),s(C.iF.Success)}if(a)throw a}catch(e){s(C.iF.Failure),t.notify(e)}})()}),[]),{destinations:i,isLoading:n===C.iF.Loading||n===C.iF.None,isFailure:n===C.iF.Failure}}var G=n("./node_modules/@shopify/react-i18n/build/esnext/context.esnext");function Z(){const e=(0,u.useContext)(G.OO);if(null==e)throw new Error("You must have an <I18nContext.Provider /> somewhere in your React tree.");return e}var Y=n("./node_modules/react-router-dom-v6/node_modules/react-router/dist/index.js");const K="no_redirect";function X(){const e=(0,Y.TH)();return"true"!==new URLSearchParams(e.search).get(K)}function ee(){const e=function(){const[e]=L(),[t]=g();if(t===C.iF.Failure)return!1;return 1===(null==e?void 0:e.reduce(((e,t)=>l(t)?e+t.destinations.filter((({status:e})=>e===C.n3.Active)).length:t.status===C.n3.Active?e+1:e),0))}(),t=X();return e&&t}const te="redirect";function ne(){const e=(0,Y.TH)();return t=>{const n=new URLSearchParams(e.search).get(te)||"";return`${t}${decodeURIComponent(n)}`}}var se=n("./packages/@web-utilities/url/hook.ts");const ie="merchant_space_preferred_locale";var ae=n("./node_modules/@shopify/i18n/build/esnext/locale.esnext"),oe=n("./app/locales/utilities.ts");function re(){const[e]=m(),t=Z();(0,r.L)((()=>{if("string"!=typeof(null==e?void 0:e.locale))return;const n=function(e){const t=oe.k$,n=Object.keys(oe.UC);if(n.includes(e))return e;const s=(0,ae.H)(e);return n.includes(s)?s:t}(e.locale);t.update({...t.details,locale:n}),f.C5&&localStorage.setItem(ie,n)}),[null==e?void 0:e.locale])}const ce={en:JSON.parse('{"StoresLayout":{"storeListLabel":"Stores","storeListLoadingLabel":"Loading your stores"}}')};var le=n("./node_modules/@shopify/polaris/build/esnext/components/Text/Text.esnext"),de=n("./node_modules/@shopify/react-hooks/build/esnext/hooks/timeout.esnext");const ue={en:JSON.parse('{"StoreCreationFailedBanner":{"content":"Something went wrong, your store couldn\'t be created. Try again in a few minutes."}}')};var pe=n("./node_modules/@shopify/polaris/build/esnext/components/Banner/Banner.esnext"),he=n("./node_modules/react/jsx-runtime.js");function me(){const[e]=(0,a.Q)({id:"StoreCreationFailedBanner_1mx5z0w",fallback:Object.values(ue)[0],translations:e=>Promise.resolve(ue[e])});return(0,he.jsx)(pe.j,{status:"critical",children:(0,he.jsx)("p",{children:e.translate("StoreCreationFailedBanner.content")})})}const ge={en:JSON.parse('{"StoreListingFailedBanner":{"content":"If your most recent stores aren\'t listed, {reloadLink} or try again later.","reloadLinkText":"reload the page"}}')};var Se=n("./node_modules/@shopify/polaris/build/esnext/components/Link/Link.esnext");function fe(){const[e]=(0,a.Q)({id:"StoreListingFailedBanner_1b4tmgg",fallback:Object.values(ge)[0],translations:e=>Promise.resolve(ge[e])});return(0,he.jsx)(pe.j,{status:"warning",children:(0,he.jsx)("p",{children:e.translate("StoreListingFailedBanner.content",{reloadLink:(0,he.jsx)(Se.r,{onClick:()=>window.location.reload(),children:e.translate("StoreListingFailedBanner.reloadLinkText")})})})})}const ve={en:JSON.parse('{"EmailValidationBanner":{"content":"You need to verify your email address before you can create another store. Check your inbox or {link}","emailLinkText":"resend verification email"}}')};var be=n("./app/foundation/App/components/StoreList/components/UrlProvider/context.ts");function ye(){return(0,u.useContext)(be.q)}function xe(){const[e]=(0,a.Q)({id:"EmailValidationBanner_7ricls",fallback:Object.values(ve)[0],translations:e=>Promise.resolve(ve[e])}),t=ye(),[n]=m(),s=null!=n&&n.sub?t.identityAccount(n.sub,Boolean(n.employeeUser)):`https://${t.identityHost()}`;return(0,he.jsx)(pe.j,{status:"warning",children:(0,he.jsx)("p",{children:e.translate("EmailValidationBanner.content",{link:(0,he.jsx)(Se.r,{url:s,target:"_blank",children:e.translate("EmailValidationBanner.emailLinkText")})})})})}const Ce={en:JSON.parse('{"InviteAcceptanceBanner":{"content":"Your user access is being processed across multiple stores. Refresh this page to see more stores when your access is activated."}}')};function _e(){const[e]=(0,a.Q)({id:"InviteAcceptanceBanner_5rdqcw",fallback:Object.values(Ce)[0],translations:e=>Promise.resolve(Ce[e])});return(0,he.jsx)(pe.j,{status:"info",children:(0,he.jsx)("p",{children:e.translate("InviteAcceptanceBanner.content")})})}const je="I41Wz";let ke=function(e){return e[e.StoreListingFailed=0]="StoreListingFailed",e[e.StoreCreationFailed=1]="StoreCreationFailed",e[e.EmailValidationWarning=2]="EmailValidationWarning",e[e.InviteAccepted=3]="InviteAccepted",e}({});const Le=({types:e})=>{const t=[];return null==e||e.forEach((e=>{e===ke.StoreCreationFailed&&t.push((0,he.jsx)(me,{},ke.StoreCreationFailed)),e===ke.StoreListingFailed&&t.push((0,he.jsx)(fe,{},ke.StoreListingFailed)),e===ke.EmailValidationWarning&&t.push((0,he.jsx)(xe,{},ke.EmailValidationWarning)),e===ke.InviteAccepted&&t.push((0,he.jsx)(_e,{},ke.InviteAccepted))})),0===t.length?null:(0,he.jsx)("div",{className:je,children:t})},Ne="CreateStoreCta",Ae="StoresHeading",Ie="main",we=10,Pe=10,ze="organization_id",Ue="invite_acceptance",Ee={en:JSON.parse('{"EmptyState":{"headerContent":"Create your first online store","buttonText":"Create store","bodyContent":"Experiment with different designs and products until you learn what works"}}')};var Te=n("./node_modules/@shopify/polaris/build/esnext/components/EmptyState/EmptyState.esnext");const Be=n.p+"f39161b23783d866.svg",Oe={EmptyStateContainer:"u7GER"};function De({onStoreCreationClick:e}){const[t]=(0,a.Q)({id:"EmptyState_9ayahe",fallback:Object.values(Ee)[0],translations:e=>Promise.resolve(Ee[e])});return(0,he.jsx)("div",{className:Oe.EmptyStateContainer,children:(0,he.jsx)(Te.u,{heading:t.translate("EmptyState.headerContent"),action:{id:Ne,content:t.translate("EmptyState.buttonText"),onAction:e},image:Be,children:(0,he.jsx)(le.x,{variant:"bodyMd",as:"span",color:"subdued",children:t.translate("EmptyState.bodyContent")})})})}const Fe={StoresLayout:"R8zsT",LayoutContent:"v8kCE"},Me={en:JSON.parse('{"StoresLayoutHeader":{"stores":"Stores","firstWelcome":"Welcome, {firstName}","welcome":"Welcome back, {firstName}","createStoreCta":"Create store"}}')};var Re=n("./node_modules/@shopify/polaris/build/esnext/components/Button/Button.esnext"),qe=n("./node_modules/@shopify/online-store-ui/build/esnext/components/MediaQueryProvider/MediaQueryProvider.esnext");const $e={StoresHeader:"haVV0",StoresHeading:"qBM_9",CreateStoreContainer:"q1slq"};function Ve({destinationsSuccessfullyFetched:e,userIsAcceptingInvite:t,onStoreCreationClick:n}){const[s]=(0,a.Q)({id:"StoresLayoutHeader_1wabqlu",fallback:Object.values(Me)[0],translations:e=>Promise.resolve(Me[e])}),[i]=L(),o=x(),[r]=m(),{mobile:c,phablet:l}=(0,qe.ac)(),d=t?"firstWelcome":"welcome",u=0===(null==i?void 0:i.length);return e&&u?null:(0,he.jsxs)("header",{className:$e.StoresHeader,children:[(0,he.jsx)("h1",{id:Ae,className:$e.StoresHeading,children:s.translate(`StoresLayoutHeader.${d}`,{firstName:null==r?void 0:r.givenName})}),(0,he.jsx)("span",{className:$e.CreateStoreContainer,children:(0,he.jsx)(Re.z,{id:Ne,onClick:()=>{o.createStore(),n()},fullWidth:c||l,children:s.translate("StoresLayoutHeader.createStoreCta")})})]})}var Qe=n("./node_modules/@shopify/polaris/build/esnext/components/Spinner/Spinner.esnext");const We=e=>e.reduce(((e,t)=>l(t)?e+t.destinations.length:e+1),0),He={en:JSON.parse('{"StoreSearchBar":{"searchPlaceHolder":"Search","label":"Store search"}}')};var Je=n("./node_modules/@shopify/polaris/build/esnext/components/TextField/TextField.esnext"),Ge=n("./node_modules/@shopify/polaris/build/esnext/components/Icon/Icon.esnext"),Ze=n("./node_modules/@shopify/polaris-icons/dist/icons/SearchMinor.svg.mjs"),Ye=n("./node_modules/use-debounce/esm/useDebouncedCallback.js");const Ke=300;function Xe({storeSearchValue:e,setStoreSearchValue:t}){const[n]=(0,a.Q)({id:"StoreSearchBar_ri0qoj",fallback:Object.values(He)[0],translations:e=>Promise.resolve(He[e])}),[s,i]=(0,u.useState)(e),[o]=(0,Ye.Z)((e=>{t(e)}),Ke);return(0,he.jsx)(Je.n,{label:n.translate("StoreSearchBar.label"),labelHidden:!0,value:s,onChange:e=>{i(e),o(e)},type:"search",placeholder:n.translate("StoreSearchBar.searchPlaceHolder"),prefix:(0,he.jsx)(Ge.J,{"aria-hidden":!0,source:Ze.S,color:"base"}),clearButton:!0,onClearButtonClick:()=>{i(""),t("")},autoComplete:"off"})}const et={en:JSON.parse('{"StoreTabs":{"tabs":{"active":"Active","inactive":"Inactive","tabAccessibleText":"{category}, {count} item(s)"}}}')};var tt=n("./node_modules/@shopify/polaris/build/esnext/components/LegacyTabs/LegacyTabs.esnext"),nt=n("./node_modules/@shopify/polaris/build/esnext/components/Badge/Badge.esnext"),st=n("./node_modules/@shopify/react-hooks/build/esnext/hooks/media.esnext");const it={TabBadge:"YjJCo"};function at({storeStatusFilter:e,setStoreStatusFilter:t,activeCount:n,inactiveCount:s}){const[i]=(0,a.Q)({id:"StoreTabs_lla4xf",fallback:Object.values(et)[0],translations:e=>Promise.resolve(et[e])}),o=(0,st.G)("(max-width: 695px)"),r=[{id:C.n3.Active,content:ot(i.translate("StoreTabs.tabs.active"),n),accessibilityLabel:i.translate("StoreTabs.tabs.tabAccessibleText",{category:i.translate("StoreTabs.tabs.active"),count:n||""})},{id:C.n3.Inactive,content:ot(i.translate("StoreTabs.tabs.inactive"),s),accessibilityLabel:i.translate("StoreTabs.tabs.tabAccessibleText",{category:i.translate("StoreTabs.tabs.inactive"),count:s||""})}],c=r.findIndex((t=>t.id===e));return(0,he.jsx)(tt.G,{tabs:r,selected:c,onSelect:e=>{const n=r[e].id;t(n)},fitted:o})}function ot(e,t){return(0,he.jsxs)(he.Fragment,{children:[e,t&&(0,he.jsx)("span",{className:it.TabBadge,children:(0,he.jsx)(nt.C,{status:"new",children:t.toString()})})]})}function rt(e){return e.filter((e=>ct(e)))}function ct(e){return e.accountStatus===C.dp.Active}function lt(e,t){const n=t.trim().toLowerCase(),s=""===n?e:e.filter((e=>!l(e)&&dt(e,n)||l(e)&&e.destinations.length&&function(e,t){return e.name.toLowerCase().includes(t)||e.destinations.some((e=>dt(e,t)))}(e,n))).map((e=>l(e)?function(e,t){if(e.name.toLowerCase().includes(t))return e;return{...e,destinations:e.destinations.filter((e=>dt(e,t)))}}(e,n):e));return s}function dt(e,t){return(e.name+e.webUrl).toLocaleLowerCase().includes(t)}var ut=n("./node_modules/classnames/index.js"),pt=n.n(ut);const ht={en:JSON.parse('{"StorePagination":{"label":"{pageNumber} of {totalPages}","a11yCurrentPage":"Current page, Page {pageNumber}","a11yGoToPage":"Go to page {pageNumber}"}}')};var mt=n("./node_modules/@shopify/polaris/build/esnext/components/Pagination/Pagination.esnext");function gt({pages:e,currentPage:t,setCurrentPage:n,trackingInfo:s}){const i="next",o="previous",[r]=(0,a.Q)({id:"StorePagination_pvkg37",fallback:Object.values(ht)[0],translations:e=>Promise.resolve(ht[e])}),c=x(),l=e.length,d=t<l,u=t>1,p=e=>{c.storeListPaginationClick(t,l,e,{...s})},h=d?r.translate("StorePagination.a11yGoToPage",{pageNumber:t+1}):"",m=u?r.translate("StorePagination.a11yGoToPage",{pageNumber:t-1}):"";return(0,he.jsx)(mt.t,{label:r.translate("StorePagination.label",{pageNumber:t,totalPages:l}),hasPrevious:u,hasNext:d,onPrevious:()=>{n(Math.max(t-1,1)),p(o)},onNext:()=>{n(Math.min(t+1,l)),p(i)},accessibilityLabel:r.translate("StorePagination.a11yCurrentPage",{pageNumber:t}),accessibilityLabels:{previous:m,next:h}})}const St="xqvs5";function ft({children:e}){return(0,he.jsx)("ul",{className:St,children:e})}const vt={en:JSON.parse('{"StoreCard":{"inactiveBadge":"Inactive"}}')};var bt=n("./node_modules/@shopify/polaris/build/esnext/components/Avatar/Avatar.esnext");const yt={StoreCard:"Qulvf",StoreIcon:"rDx1m",StoreDetails:"ZkBIp",Caption:"NX8Sj",Chevron:"tdxHf",StoreCardContainer:"AaDrf",StoreMeta:"y_PtF",StoreCardWithParent:"yAbmW",StoreCardWithParentFooter:"rQHFP",StoreCardWithParentMeta:"pZ3qR"};function xt({name:e,shortName:t,webUrl:n,unifiedWebUrl:s,publicId:i,status:o,position:r,trackingInfo:c,isOrganizationStore:l=!1,organizationCardCanExpand:d=!1}){const[u]=(0,a.Q)({id:"StoreCard_18vtb6q",fallback:Object.values(vt)[0],translations:e=>Promise.resolve(vt[e])}),p=x(),h=ne(),m=atob(i).split("/").pop(),g=pt()(yt.StoreCardContainer,l&&yt.StoreCardWithParent,l&&d&&yt.StoreCardWithParentFooter),S=pt()(l&&yt.StoreCardWithParentMeta,yt.StoreMeta),f=o===C.n3.Inactive,v=(0,he.jsx)(bt.q,{name:e,accessibilityLabel:e,initials:t,size:"extraSmall",shape:"square"}),b=(0,he.jsx)(he.Fragment,{children:(0,he.jsxs)("div",{className:yt.StoreDetails,children:[(0,he.jsx)(le.x,{variant:"headingSm",as:"h6",children:e}),(0,he.jsx)("span",{className:yt.Caption,"aria-hidden":"true",children:(0,he.jsx)(le.x,{variant:"bodySm",as:"p",children:new URL(n).hostname})})]})}),y=f?(0,he.jsx)("div",{className:yt.Badge,children:(0,he.jsx)(nt.C,{children:u.translate("StoreCard.inactiveBadge")})}):null;return(0,he.jsx)("li",{className:g,children:(0,he.jsx)("a",{href:h(s||n),className:yt.StoreCard,onClick:async()=>{try{await p.clickStore(Number(m),r,o,{...c})}catch{}},children:(0,he.jsxs)("div",{className:S,children:[(0,he.jsx)("span",{className:yt.StoreIcon,children:v}),b,y]})})})}const Ct={en:JSON.parse('{"OrganizationCard":{"showAllStores":"View all stores in this organization","storeCount":{"one":"{count} Store","other":"{count} Stores"}}}')};var _t=n("./node_modules/@shopify/polaris/build/esnext/components/LegacyCard/LegacyCard.esnext"),jt=n("./node_modules/@shopify/polaris/build/esnext/components/LegacyStack/LegacyStack.esnext"),kt=n("./node_modules/@shopify/polaris-icons/dist/icons/OrganizationMajor.svg.mjs");const Lt="J9bZB",Nt="W70ZB",At="roCAc",It="u2SYu";function wt({name:e,id:t,destinations:n,trackingInfo:s}){const[i]=(0,a.Q)({id:"OrganizationCard_1iss7du",fallback:Object.values(Ct)[0],translations:e=>Promise.resolve(Ct[e])}),[o,r]=(0,u.useState)(!1),c=(0,he.jsx)(Se.r,{removeUnderline:!0,onClick:()=>r(!0),children:i.translate("OrganizationCard.showAllStores")}),l=n.length>Pe&&!o&&(0,he.jsx)(_t.z.Section,{children:c});return(0,he.jsxs)(_t.z,{children:[(0,he.jsx)(_t.z.Section,{children:(0,he.jsxs)(jt.D,{alignment:"center",spacing:"baseTight",children:[(0,he.jsx)("span",{className:At,children:(0,he.jsx)("span",{className:It,children:(0,he.jsx)(Ge.J,{source:kt.S,color:"base"})})}),(0,he.jsx)(jt.D.Item,{fill:!0,children:(0,he.jsxs)(jt.D,{vertical:!0,spacing:"none",children:[(0,he.jsx)(le.x,{variant:"headingMd",as:"h2",children:(0,he.jsx)("div",{className:Lt,children:(0,he.jsx)("span",{className:Nt,children:e})})}),(0,he.jsx)(le.x,{variant:"bodyMd",as:"span",color:"subdued",children:i.translate("OrganizationCard.storeCount",{count:n.length})})]})})]})}),n.filter(((e,t)=>o||t<Pe)).map(((e,t)=>(0,he.jsx)(xt,{position:t+1,...e,trackingInfo:s,isOrganizationStore:!0,organizationCardCanExpand:n.length>Pe&&!o},e.webUrl))),l]},t)}const Pt="dP0c6",zt="RFs1U",Ut="xL96F",Et=(0,u.forwardRef)((({pages:e,currentPage:t,setCurrentPage:n,trackingInfo:s,showPagination:i},a)=>{const o=e[t-1].map(((e,t)=>l(e)?(0,he.jsx)(wt,{name:e.name,id:e.id,destinations:e.destinations,trackingInfo:s},e.id):(0,he.jsx)(xt,{position:t+1,...e,trackingInfo:s},e.webUrl))),r=pt()(Pt,!i&&zt);return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)("section",{className:r,"aria-labelledby":Ae,ref:a,children:(0,he.jsx)(ft,{children:o})}),i&&(0,he.jsx)("div",{className:Ut,children:(0,he.jsx)(gt,{pages:e,currentPage:t,setCurrentPage:n,trackingInfo:s})})]})})),Tt={en:JSON.parse('{"StoreList":{"emptySearch":{"title":"No results for \\"{searchValue}\\"","description":"Try changing your search or checking the other tabs."}}}')};var Bt=n("./node_modules/@shopify/polaris/build/esnext/components/EmptySearchResult/EmptySearchResult.esnext");function Ot({searchValue:e}){const[t]=(0,a.Q)({id:"EmptySearch_108r5df",fallback:Object.values(Tt)[0],translations:e=>Promise.resolve(Tt[e])});return(0,he.jsx)(Bt.K,{title:t.translate("StoreList.emptySearch.title",{searchValue:e}),description:t.translate("StoreList.emptySearch.description"),withIllustration:!0})}const Dt={FiltersWrapper:"MXhlJ",TabsWrapper:"LEN2g",Spinner:"GBOFs",EmptySearchWrapper:"Gv2d0"};function Ft(e){const t=[[]];for(const n of e){const e=t[t.length-1];We(e)<we?e.push(n):t.push([n])}return t}function Mt({destinations:e,organizationIdFilter:t}){const[n,s]=(0,u.useState)(""),[i,a]=(0,u.useState)(C.n3.Active),[o,r]=(0,u.useState)([]),[c,p]=(0,u.useState)(1),h=(0,u.useMemo)((()=>function(e,t){const n=t?d(e,t):void 0,s=n?[n]:e,i={[C.n3.Active]:[],[C.n3.Inactive]:[]};return s.forEach((e=>{if(l(e)){const t={...e,destinations:rt(e.destinations.filter((e=>e.status===C.n3.Active)))};e.destinations.length&&i[C.n3.Active].push(t);const n={...e,destinations:rt(e.destinations.filter((e=>e.status===C.n3.Inactive)))};n.destinations.length&&i[C.n3.Inactive].push(n)}else ct(e)&&i[e.status].push(e)})),i}(e,t)),[e,t]),[m,g]=(0,u.useState)(h),[S,f]=(0,u.useState)(!1),v=function(e){return 0!==e[C.n3.Active].length&&0!==e[C.n3.Inactive].length}(h),b=x(),y=o.length>0&&o[0].length>0,_=(0,u.useRef)(null),j=(0,u.useCallback)((e=>{var t;c!==e&&(null===(t=_.current)||void 0===t||t.scrollTo(0,0));p(e)}),[c]),k=(0,u.useMemo)((()=>Ft(h[C.n3.Active]).length>1||Ft(h[C.n3.Inactive]).length>1||h[C.n3.Active].some((e=>l(e)&&e.destinations.length>Pe))||h[C.n3.Inactive].some((e=>l(e)&&e.destinations.length>Pe))),[h]),L=o.length>1;function N(){return L?{totalPageCount:o.length,currentPage:c}:{}}(0,u.useEffect)((()=>{f(!0)}),[n,i]),(0,u.useEffect)((()=>{const e={[C.n3.Active]:lt(h[C.n3.Active],n),[C.n3.Inactive]:lt(h[C.n3.Inactive],n)};if(""===n&&0===e[C.n3.Active].length&&i===C.n3.Active)return void a(C.n3.Inactive);g(e);const t=Ft(e[i]);t.length!==o.length&&j(1),r(t);const s=setTimeout((()=>{f(!1)}));return()=>{clearTimeout(s)}}),[h,n,i,j,o.length,t]);const A=y?(0,he.jsx)(Et,{pages:o,currentPage:c,setCurrentPage:j,showPagination:L,ref:_,trackingInfo:{activeShopsLength:m[C.n3.Active].length,inactiveShopsLength:m[C.n3.Inactive].length,...v?{selectedTab:i}:{},...k?{filterValue:n}:{},...N()}}):(0,he.jsx)("div",{className:Dt.EmptySearchWrapper,children:(0,he.jsx)(Ot,{searchValue:n})});return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsxs)("div",{className:Dt.FiltersWrapper,children:[k&&(0,he.jsx)(Xe,{storeSearchValue:n,setStoreSearchValue:function(e){s(e),b.filterValueChange(e,{activeShopsLength:We(m[C.n3.Active]),inactiveShopsLength:We(m[C.n3.Inactive]),...v?{selectedTab:i}:{},...N()})}}),v&&(0,he.jsx)("div",{className:Dt.TabsWrapper,children:(0,he.jsx)(at,{storeStatusFilter:i,setStoreStatusFilter:function(e){e!==i&&(a(e),b.storeStatusTabSelected(e,{activeShopsLength:We(m[C.n3.Active]),inactiveShopsLength:We(m[C.n3.Inactive]),...k?{filterValue:n}:{},...N()}))}})}),S&&(0,he.jsx)("span",{className:Dt.Spinner,children:(0,he.jsx)(Qe.$,{size:"small"})})]}),A]})}const Rt={SkeletonStoreList:"oxXKn",SkeletonStoreCard:"lavXd","fade-in":"LkypD",SkeletonAvatar:"Q6r2W",SkeletonTextContainer:"wkhDS",SkeletonDisplayText:"wGsFS",SkeletonBodyText:"j3oG3"};function qt({stores:e=3}){const t=Array.from({length:e});return(0,he.jsx)("div",{className:Rt.SkeletonStoreList,children:[...t.keys()].map((e=>(0,he.jsxs)("div",{className:Rt.SkeletonStoreCard,children:[(0,he.jsx)("div",{className:Rt.SkeletonAvatar}),(0,he.jsxs)("div",{className:Rt.SkeletonTextContainer,children:[(0,he.jsx)("div",{className:Rt.SkeletonDisplayText}),(0,he.jsx)("div",{className:Rt.SkeletonBodyText})]})]},e)))})}function $t({destinations:e,isLoading:t,isFailure:n,onStoreCreationClick:s}){const[i]=(0,a.Q)({id:"StoresLayout_12hlz4o",fallback:Object.values(ce)[0],translations:e=>Promise.resolve(ce[e])}),[o,r]=(0,u.useState)(""),c=(0,Y.TH)(),l=new URLSearchParams(c.search),p=l.get(ze),h=Boolean(l.get(Ue)),m=(0,u.useMemo)((()=>{if(!e||!p)return!1;const t=d(e,p);return!!t&&t.destinations.some((e=>e.accountStatus===C.dp.Pending))}),[e,p]),g=(0,u.useCallback)((()=>{const e=[];return n&&e.push(ke.StoreListingFailed),h&&m&&e.push(ke.InviteAccepted),e}),[n,h,m])(),S=!t&&!n,f=i.translate("StoresLayout.storeListLoadingLabel");(0,de.K)((()=>r(f)),t?400:null);const v=Boolean(0===(null==e?void 0:e.length)&&S),b=e&&e.length>0;return(0,he.jsxs)("div",{className:Fe.StoresLayout,children:[(0,he.jsx)(Ve,{userIsAcceptingInvite:h,destinationsSuccessfullyFetched:S,onStoreCreationClick:s}),(0,he.jsx)(Le,{types:g}),v&&(0,he.jsx)(De,{onStoreCreationClick:s}),(0,he.jsx)("div",{"aria-busy":t,"aria-live":"polite",children:b?(0,he.jsx)(Mt,{destinations:e,organizationIdFilter:p}):(0,he.jsx)(qt,{stores:5})}),(0,he.jsx)(le.x,{variant:"bodySm",as:"span",visuallyHidden:!0,children:(0,he.jsx)("span",{"aria-live":"assertive","aria-hidden":!t,children:o})})]})}var Vt=n("./node_modules/@shopify/polaris/build/esnext/components/UnstyledLink/UnstyledLink.esnext"),Qt=n("./node_modules/@shopify/polaris/build/esnext/components/Image/Image.esnext");const Wt={en:JSON.parse('{"TopBar":{"primaryItems":{"account":"Manage account"},"secondaryItems":{"switchAccounts":"Switch account","logout":"Log out"},"user":{"defaultName":"Your account","defaultInitials":"YA"}}}')};var Ht=n("./node_modules/@shopify/polaris/build/esnext/components/Popover/Popover.esnext"),Jt=n("./node_modules/@shopify/polaris/build/esnext/components/ActionList/ActionList.esnext"),Gt=n("./node_modules/@shopify/polaris-icons/dist/icons/ProfileMinor.svg.mjs"),Zt=n("./node_modules/@shopify/polaris-icons/dist/icons/LogOutMinor.svg.mjs");const Yt={Activator:"n5645","Activator-pressed":"Bpi6S","Activator-hidden":"H5GrP",Avatar:"MflIN",Chevron:"jh0P3",UserMeta:"HIM8m",MetaName:"kBdjA",MetaEmail:"FIqkw",ActivatorContainer:"dG4d_",SkeletonActivator:"C9JGx"};function Kt({isLoading:e}){var t,n;const s=ye(),i=x(),[o]=(0,a.Q)({id:"UserMenu_1y5ugpq",fallback:Object.values(Wt)[0],translations:e=>Promise.resolve(Wt[e])}),[r]=m(),[c,l]=(0,u.useState)(!1),[d,p]=(0,u.useState)(!1),h=()=>{i.linkClick("user_menu_toggle_"+(c?"close":"open")),l(!c)},g=pt()(Yt.Activator,{[Yt["Activator-pressed"]]:c,[Yt["Activator-hidden"]]:e}),S=e=>{i.linkClick(e)},f=null==r?void 0:r.displayName,v=null==r?void 0:r.email,b=null!=f?f:o.translate("TopBar.user.defaultName"),y=null!==(C=null==r?void 0:r.givenName,_=null==r?void 0:r.familyName,t=C||_?`${null!==(j=null==C?void 0:C.charAt(0))&&void 0!==j?j:""}${null!==(k=null==_?void 0:_.charAt(0))&&void 0!==k?k:""}`.toUpperCase():null)&&void 0!==t?t:o.translate("TopBar.user.defaultInitials");var C,_,j,k;const L=null!=r&&r.sub&&!r.employeeUser?s.identityAccountGravatar(r.sub):void 0,N=d?void 0:null!==(n=null==r?void 0:r.picture)&&void 0!==n?n:L,A=e=>(0,he.jsx)(bt.q,{initials:y,name:b,size:e,customer:!1,onError:()=>p(!0),source:N}),I=(0,he.jsxs)("div",{className:Yt.ActivatorContainer,children:[e&&(0,he.jsx)("div",{className:Yt.SkeletonActivator}),(0,he.jsx)("button",{type:"button",onClick:h,className:g,children:(0,he.jsx)("span",{className:Yt.Avatar,children:A("small")})})]}),w=[{content:o.translate("TopBar.primaryItems.account"),external:!0,icon:Gt.S,url:null!=r&&r.sub?s.identityAccount(r.sub,Boolean(r.employeeUser)):void 0,onAction:()=>S("user-account")},{content:o.translate("TopBar.secondaryItems.logout"),icon:Zt.S,url:"/logout",onAction:()=>S("logout")}];return r||w.shift(),(0,he.jsxs)(Ht.J,{active:c,activator:I,onClose:h,preferredAlignment:"right",children:[(f||v)&&(0,he.jsx)(Ht.J.Pane,{fixed:!0,children:(0,he.jsx)(Ht.J.Section,{children:(0,he.jsxs)(jt.D,{spacing:"tight",wrap:!1,children:[A(),(0,he.jsx)(jt.D.Item,{fill:!0,children:(0,he.jsxs)("div",{className:Yt.UserMeta,children:[(0,he.jsx)("p",{className:Yt.MetaName,children:(0,he.jsx)(le.x,{variant:"bodyMd",as:"span",fontWeight:"semibold",children:f})}),(0,he.jsx)("div",{className:Yt.MetaEmail,children:(0,he.jsx)(le.x,{variant:"bodySm",as:"p",color:"subdued",children:v})})]})})]})})}),(0,he.jsx)(Ht.J.Pane,{children:(0,he.jsx)(Jt.S,{sections:[{items:w}]})})]})}const Xt=n.p+"a80f278c6fb06187.svg",en={TopBar:"nygRq",TopBarInner:"Aq90H",LogoLink:"vLocc"};function tn({showUserMenu:e,isLoading:t}){const{rootUrl:n}=ye();return(0,he.jsx)("header",{role:"banner",className:en.TopBar,children:(0,he.jsxs)("div",{className:en.TopBarInner,children:[(0,he.jsx)(Vt.H,{url:`${n.pathname}${n.search}`,className:en.LogoLink,"aria-label":"Shopify","aria-current":window.location.pathname===n.pathname&&"page",children:(0,he.jsx)(Qt.E,{source:Xt,alt:"",className:en.Logo})}),e&&(0,he.jsx)(Kt,{isLoading:t})]})})}const nn={en:JSON.parse('{"LoadingBar":{"label":"Page loading bar"}}')},sn={Loading:"tQMbL",isAnimating:"hbCOK",Level:"t1MMa"},an=99,on=300,rn=1e3,cn=500;function ln({complete:e=!1}){const[t]=(0,a.Q)({id:"LoadingBar_d17myg",fallback:Object.values(nn)[0],translations:e=>Promise.resolve(nn[e])}),[n,s]=(0,u.useState)(0),[i,o]=(0,u.useState)(!1);(0,u.useEffect)((()=>{if(!e)return;s(100);const t=setTimeout((()=>{o(!1)}),cn);return()=>{clearTimeout(t)}}),[e]),(0,u.useEffect)((()=>{if(n>=an)return;let e=-1;const t=Math.max((an-n)/10,1),a=Math.floor(Math.random()*(rn-on)+on);return i||o(!0),clearInterval(e),e=window.setInterval((()=>s(n+t)),a),()=>clearInterval(e)}),[n,i]);const r={transform:`scaleX(${Math.floor(n)/100})`,transitionDuration:`${cn}ms`},c=pt()(sn.Loading,i&&sn.isAnimating);return(0,he.jsx)("div",{className:c,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-hidden":!i,role:"progressbar","aria-label":t.translate("LoadingBar.label"),children:(0,he.jsx)("div",{className:sn.Level,style:r})})}const dn={en:JSON.parse('{"SkipLink":{"content":"Skip to content"}}')},un={SkipLink:"EetcE",pressed:"In7qE"};function pn({focusReceiverId:e}){const[t]=(0,a.Q)({id:"SkipLink_455re8",fallback:Object.values(dn)[0],translations:e=>Promise.resolve(dn[e])});return(0,he.jsx)("a",{href:`#${e}`,className:un.SkipLink,children:t.translate("SkipLink.content")})}const hn="pON0a",mn="d8wNT",gn="GiID1";function Sn({children:e,id:t,className:n,header:s,footer:i,loadingBar:a,containerClassName:o,...r}){return(0,he.jsxs)("div",{className:o,children:[a,(0,he.jsx)(pn,{focusReceiverId:Ie}),(0,he.jsxs)("div",{className:mn,children:[s,(0,he.jsx)("main",{id:t,role:"main",className:hn,children:(0,he.jsx)("div",{id:Ie,className:gn,tabIndex:-1,...r,children:e})}),i]})]})}const fn=(0,u.memo)(Sn),vn={GradientBackground:"VTkrS",isSplitLayout:"DsSct"};function bn(e){const t=pt()(vn.GradientBackground,e.isSplit&&vn.isSplitLayout);return(0,he.jsx)("div",{className:t})}const yn={Container:"gaVTT",StoresLayoutContainer:"IGaEB","StoresLayoutContainer-hidden":"HRqV6",SurfaceArea:"JNDO2","SurfaceArea-hasIllustration":"nFu_Z",SurfaceAreaInner:"cXgeV"};function xn({showLoadingState:e,...t}){re();const n=(0,se.w)(),s=yn.StoresLayoutContainer,i=yn.SurfaceArea;return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(fn,{id:"MerchantSpace",containerClassName:yn.Container,header:(0,he.jsx)(tn,{showUserMenu:!0,isLoading:e}),loadingBar:(0,he.jsx)(ln,{complete:!e}),children:(0,he.jsx)("section",{className:i,children:(0,he.jsx)("div",{className:yn.SurfaceAreaInner,children:(0,he.jsx)("div",{className:s,children:(0,he.jsx)($t,{...t,onStoreCreationClick:()=>{window.location.href=n.storeCreate(!0,{"signup_types[]":"unified_admin"})}})})})})}),(0,he.jsx)(bn,{})]})}function Cn(){const e=Z(),[t]=(0,a.Q)({id:"StoreListing_1ocv34c",fallback:Object.values(s)[0],translations:e=>Promise.resolve(s[e])}),n=J(),c=ee(),d=ne();!function(){const e=X(),t=(0,Y.s0)(),n=(0,Y.TH)();(0,u.useEffect)((()=>{if("/"!==n.pathname){let s=`?${te}=${encodeURIComponent(`${n.pathname}${n.search}${n.hash}`)}`;e||(s+=`&${K}=true`),t({pathname:"/",search:s},{replace:!0})}}),[e,t,n.pathname,n.search,n.hash])}(),(0,i.ZQ)(t.translate("Head.title")),(0,r.L)((()=>{document.documentElement.setAttribute("lang",t.locale),e.subscribe([],((e,{locale:t})=>{document.documentElement.setAttribute("lang",t)}))}),[]);const[p]=g(),h=p===C.iF.Loading||p===C.iF.None;if(c){const e=function(e){if(e)for(const t of e)if(!l(t)&&t.status===C.n3.Active)return t.unifiedWebUrl}(n.destinations);if(e){const t=d(e);return(0,he.jsx)(o.Z,{url:t})}}const m={showLoadingState:h,...n};return(0,he.jsx)(xn,{...m})}},"./node_modules/@shopify/polaris-icons/dist/icons/ChevronLeftMinor.svg.mjs":(e,t,n)=>{n.d(t,{S:()=>i});var s=n("./node_modules/react/index.js"),i=function(e){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),s.createElement("path",{fillRule:"evenodd",d:"M11.78 5.47a.75.75 0 0 1 0 1.06l-3.47 3.47 3.47 3.47a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 0Z"}))}},"./node_modules/@shopify/polaris-icons/dist/icons/OrganizationMajor.svg.mjs":(e,t,n)=>{n.d(t,{S:()=>i});var s=n("./node_modules/react/index.js"),i=function(e){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),s.createElement("path",{d:"M6.75 9a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z"}),s.createElement("path",{d:"M8.75 9.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Z"}),s.createElement("path",{d:"M9.5 6.5a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z"}),s.createElement("path",{d:"M6 7.25a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Z"}),s.createElement("path",{fillRule:"evenodd",d:"M3.5 5.25c0-.966.784-1.75 1.75-1.75h6.25c.966 0 1.75.784 1.75 1.75v1.75h1.5c.966 0 1.75.784 1.75 1.75v6a1.75 1.75 0 0 1-1.75 1.75h-9.5a1.75 1.75 0 0 1-1.75-1.75v-9.5Zm4.25 9.75h1.25v-1.25a.25.25 0 0 0-.25-.25h-.75a.25.25 0 0 0-.25.25v1.25Zm2.75 0v-1.25a1.75 1.75 0 0 0-1.75-1.75h-.75a1.75 1.75 0 0 0-1.75 1.75v1.25h-1a.25.25 0 0 1-.25-.25v-9.5a.25.25 0 0 1 .25-.25h6.25a.25.25 0 0 1 .25.25v9.5a.25.25 0 0 1-.25.25h-1Zm2.75-.25v-6.25h1.5a.25.25 0 0 1 .25.25v6a.25.25 0 0 1-.25.25h-1.518a1.72 1.72 0 0 0 .018-.25Z"}))}}}]);